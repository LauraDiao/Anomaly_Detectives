# Network Signal Anomaly Detection
#### by the Anomaly Detectives
Laura Diao, Jenna Yang, Benjamin Sam

# Overview
In order to detect issues in network transmission data, we built a real-time-capable anomaly detection system. This system includes both alerting and monitoring features, which would enable Internet Service Providers (ISP's) such as Viasat to properly monitor user network performance and quality in real time. Moreover, detection in real-time would allow Viasat to handle issues more promptly and increase customer satisfaction. The system utilizes simulated network traffic data to train a model that predicts the packet loss rate as well as the latency of an internet connection, and uses these as well as certain features derived from the data to determine whether an adverse event is occurring.

# Quick Links
- [Main GitHub Repository](https://github.com/LauraDiao/Q2)
- [Modified DANE](https://github.com/jenna-my/modified_dane)

# Introduction
Network degradation occurs in many forms, and our project will focus on two common factors: packet loss and latency. Packet loss occurs when one or more data packets transmitted across a computer network fail to reach their destination. Latency can be defined as a measure of delay for data to transmit across a network. For internet users, high rates of packet loss and significant latency can manifest in jitter or lag, indicators of overall poor network performance as perceived by the end user. Thus, when issues arise in these two factors, it would be beneficial for service providers to know exactly when the user is experiencing problems in real time. In real world scenarios, situations or environments such as poor port quality, overloaded ports, network congestion and more can impact overall network performance.

[A deeper discussion on networks and common problems with packet loss and latency](network-domain.md)

# Data

## Data Generation with DANE
The simulated network data used for our models were generated with a network emulation tool built by a previous capstone project team. [DANE](https://dane-tool.github.io/dane/), which stands for Data Automation and Network Emulation, is a dataset generation tool that can emulate diverse ranges of network traffic representative of the real world. The DANE tool allows us to custom configure network conditions such as latency and packet loss and generate network traffic data associated with the configured conditions.
For any anomaly detection system, diversity in conditions is crucial to adequately cover the variance of real world scenarios. With a feature to create custom profiles of network traffic scenarios, DANE allows us to properly emulate the diversity and variety of network conditions that occur in the real world. 

The data generated by DANE for our project includes various packet loss and latency scenarios in which packets were dropped randomly from a uniform distribution. For each scenario, a simulated "anomaly" is configured around midpoint time by changing the loss and latency values. For example, the set loss would drop from 20000 to 200, indicating a major shift in loss which would be the simulated anomaly (we discuss our definition of an anomaly later in the anomaly classifier section). Empirical loss values are also included from DANE as a true value measure against the predicted values of our model. This data was generated manually on our Windows computers.

For a more in depth explanation and tutorial of DANE in the context of our project, please click [here](dane-details.md).

## Exploring the Feature Space
- A bit more eda

# Methods

## Pipeline
- short summary paragraph discussing what is and how the general pipeline works
- how pipeline was set up and basic motivations, why we wanted it and what results we wanted
- pipeline visuals, why we chose it

## The Regression Model
- the regression problem presented
- [all features used by final regression model, with their general explanations]
- how we came up with features, why/how we selected them

Our project runs on the following data pipeline as seen above. Raw data from our modified fork of DANE (either for train or test purposes) is cleaned and transformed into 10 second aggregations which are then fed into a regression model that makes predictions of loss and latency. With predictions being made on a stream of data in real time, our anomaly detector would ingest these predictions and identify anomalous behavior based on established thresholds of change.  

## Anomaly Classifier
- follow up the regression model and how this is an extension of the prev reg model
- our general mechanism (for now): threshold on pct change of regression model output

Finally, we plan to implement and integrate the anomaly detection mechanism for the system, which would ingest the predictions from our regression model and identify anomalies in 10 second windows. We fleshed out the definition and threshold of an anomaly, and defined it as any significantly rapid increase in packet loss rate as well as latency.

## Results (header/subheader)
- Regression Model performance metrics
- Classification performance metrics (gotta be figured out)
- analysis of results and power of model

[link to more in depth (and possibly interactive!) tutorial on model pipeline](model-details.md)

# Conclusions
- post modelling analysis and practical use, why this work is important

## [Possible Practical Extensions?]

## Limitations
- limitations of using simulated data as provided by DANE

Throughout our project, we ran into some limitations. Due to the size of the dataset we processed and trained on, this led to long run times and made our workflow less efficient. we combated this by reducing overcorrelated features by referencing the correlation matrix, and only selecting features that had high feature importances for model performance.

We spent some time investigating different model metrics that would be appropriate for our project's pipeline and measure results.
- discuss MAPE, percent classsified correctly within margin
-


# Special Thanks
- [UCSD Halıcıoğlu Data Science Institute](https://datascience.ucsd.edu/)
- [Viasat](https://www.viasat.com/)
- [DANE](https://github.com/dane-tool/dane)
